"use strict";exports.id=586,exports.ids=[586],exports.modules={445:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Re,parsers:()=>a});var r=Object.defineProperty,n=(e,t)=>{for(var s in t)r(e,s,{get:t[s],enumerable:!0})},i={};n(i,{parsers:()=>a});var a={};n(a,{__ng_action:()=>Te,__ng_binding:()=>$e,__ng_directive:()=>Be,__ng_interpolation:()=>Me});var o,h,u,l=function(){function e(e){this.length=e.length;for(var t=[0],s=0;s<e.length;)switch(e[s]){case"\n":s+=1,t.push(s);break;case"\r":"\n"===e[s+=1]&&(s+=1),t.push(s);break;default:s++}this.offsets=t}return e.prototype.locationForIndex=function(e){if(e<0||e>this.length)return null;for(var t=0,s=this.offsets;s[t+1]<=e;)t++;return{line:t,column:e-s[t]}},e.prototype.indexForLocation=function(e){var t=e.line,s=e.column;return t<0||t>=this.offsets.length||s<0||s>this.lengthOfLine(t)?null:this.offsets[t]+s},e.prototype.lengthOfLine=function(e){var t=this.offsets[e];return(e===this.offsets.length-1?this.length:this.offsets[e+1])-t},e}(),c=class{text;locator;constructor(e){this.text=e,this.locator=new p(this.text)}},p=class{_linesAndColumns;constructor(e){this._linesAndColumns=new l(e)}locationForIndex(e){let{line:t,column:s}=this._linesAndColumns.locationForIndex(e);return{line:t+1,column:s,index:e}}},d=class{constructor(e,t,s,r){this.input=t,this.errLocation=s,this.ctxLocation=r,this.message=`Parser Error: ${e} ${s} [${t}] in ${r}`}},f=class{constructor(e,t){this.start=e,this.end=t}toAbsolute(e){return new U(e+this.start,e+this.end)}},x=class{constructor(e,t){this.span=e,this.sourceSpan=t}toString(){return"AST"}},v=class extends x{constructor(e,t,s){super(e,t),this.nameSpan=s}},g=class extends x{visit(e,t=null){}},m=class extends x{visit(e,t=null){return e.visitImplicitReceiver(this,t)}},y=class extends m{visit(e,t=null){var s;return null==(s=e.visitThisReceiver)?void 0:s.call(e,this,t)}},w=class extends x{constructor(e,t,s){super(e,t),this.expressions=s}visit(e,t=null){return e.visitChain(this,t)}},S=class extends x{constructor(e,t,s,r,n){super(e,t),this.condition=s,this.trueExp=r,this.falseExp=n}visit(e,t=null){return e.visitConditional(this,t)}},C=class extends v{constructor(e,t,s,r,n){super(e,t,s),this.receiver=r,this.name=n}visit(e,t=null){return e.visitPropertyRead(this,t)}},P=class extends v{constructor(e,t,s,r,n,i){super(e,t,s),this.receiver=r,this.name=n,this.value=i}visit(e,t=null){return e.visitPropertyWrite(this,t)}},O=class extends v{constructor(e,t,s,r,n){super(e,t,s),this.receiver=r,this.name=n}visit(e,t=null){return e.visitSafePropertyRead(this,t)}},k=class extends x{constructor(e,t,s,r){super(e,t),this.receiver=s,this.key=r}visit(e,t=null){return e.visitKeyedRead(this,t)}},E=class extends x{constructor(e,t,s,r){super(e,t),this.receiver=s,this.key=r}visit(e,t=null){return e.visitSafeKeyedRead(this,t)}},I=class extends x{constructor(e,t,s,r,n){super(e,t),this.receiver=s,this.key=r,this.value=n}visit(e,t=null){return e.visitKeyedWrite(this,t)}},b=class extends v{constructor(e,t,s,r,n,i){super(e,t,i),this.exp=s,this.name=r,this.args=n}visit(e,t=null){return e.visitPipe(this,t)}},A=class extends x{constructor(e,t,s){super(e,t),this.value=s}visit(e,t=null){return e.visitLiteralPrimitive(this,t)}},K=class extends x{constructor(e,t,s){super(e,t),this.expressions=s}visit(e,t=null){return e.visitLiteralArray(this,t)}},N=class extends x{constructor(e,t,s,r){super(e,t),this.keys=s,this.values=r}visit(e,t=null){return e.visitLiteralMap(this,t)}},L=class extends x{constructor(e,t,s,r){super(e,t),this.strings=s,this.expressions=r}visit(e,t=null){return e.visitInterpolation(this,t)}},_=class extends x{constructor(e,t,s,r,n){super(e,t),this.operation=s,this.left=r,this.right=n}visit(e,t=null){return e.visitBinary(this,t)}},T=class e extends _{static createMinus(t,s,r){return new e(t,s,"-",r,"-",new A(t,s,0),r)}static createPlus(t,s,r){return new e(t,s,"+",r,"-",r,new A(t,s,0))}constructor(e,t,s,r,n,i,a){super(e,t,n,i,a),this.operator=s,this.expr=r,this.left=null,this.right=null,this.operation=null}visit(e,t=null){return void 0!==e.visitUnary?e.visitUnary(this,t):e.visitBinary(this,t)}},$=class extends x{constructor(e,t,s){super(e,t),this.expression=s}visit(e,t=null){return e.visitPrefixNot(this,t)}},M=class extends x{constructor(e,t,s){super(e,t),this.expression=s}visit(e,t=null){return e.visitNonNullAssert(this,t)}},B=class extends x{constructor(e,t,s,r,n){super(e,t),this.receiver=s,this.args=r,this.argumentSpan=n}visit(e,t=null){return e.visitCall(this,t)}},R=class extends x{constructor(e,t,s,r,n){super(e,t),this.receiver=s,this.args=r,this.argumentSpan=n}visit(e,t=null){return e.visitSafeCall(this,t)}},U=class{constructor(e,t){this.start=e,this.end=t}},F=class extends x{constructor(e,t,s,r,n){super(new f(0,null===t?0:t.length),new U(r,null===t?r:r+t.length)),this.ast=e,this.source=t,this.location=s,this.errors=n}visit(e,t=null){return e.visitASTWithSource?e.visitASTWithSource(this,t):this.ast.visit(e,t)}toString(){return`${this.source} in ${this.location}`}},G=class{constructor(e,t,s){this.sourceSpan=e,this.key=t,this.value=s}},V=class{constructor(e,t,s){this.sourceSpan=e,this.key=t,this.value=s}},W=class{visit(e,t){e.visit(this,t)}visitUnary(e,t){this.visit(e.expr,t)}visitBinary(e,t){this.visit(e.left,t),this.visit(e.right,t)}visitChain(e,t){this.visitAll(e.expressions,t)}visitConditional(e,t){this.visit(e.condition,t),this.visit(e.trueExp,t),this.visit(e.falseExp,t)}visitPipe(e,t){this.visit(e.exp,t),this.visitAll(e.args,t)}visitImplicitReceiver(e,t){}visitThisReceiver(e,t){}visitInterpolation(e,t){this.visitAll(e.expressions,t)}visitKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitKeyedWrite(e,t){this.visit(e.receiver,t),this.visit(e.key,t),this.visit(e.value,t)}visitLiteralArray(e,t){this.visitAll(e.expressions,t)}visitLiteralMap(e,t){this.visitAll(e.values,t)}visitLiteralPrimitive(e,t){}visitPrefixNot(e,t){this.visit(e.expression,t)}visitNonNullAssert(e,t){this.visit(e.expression,t)}visitPropertyRead(e,t){this.visit(e.receiver,t)}visitPropertyWrite(e,t){this.visit(e.receiver,t),this.visit(e.value,t)}visitSafePropertyRead(e,t){this.visit(e.receiver,t)}visitSafeKeyedRead(e,t){this.visit(e.receiver,t),this.visit(e.key,t)}visitCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitSafeCall(e,t){this.visit(e.receiver,t),this.visitAll(e.args,t)}visitAll(e,t){for(let s of e)this.visit(s,t)}};function j(e){return e>=9&&e<=32||160==e}function q(e){return 48<=e&&e<=57}function z(e){return 39===e||34===e||96===e}(h=o||(o={}))[h.DEFAULT=0]="DEFAULT",h[h.LITERAL_ATTR=1]="LITERAL_ATTR",h[h.ANIMATION=2]="ANIMATION",function(e){e[e.Character=0]="Character",e[e.Identifier=1]="Identifier",e[e.PrivateIdentifier=2]="PrivateIdentifier",e[e.Keyword=3]="Keyword",e[e.String=4]="String",e[e.Operator=5]="Operator",e[e.Number=6]="Number",e[e.Error=7]="Error"}(u||(u={}));var D=["var","let","as","null","undefined","true","false","if","else","this"],J=class{tokenize(e){let t=new Z(e),s=[],r=t.scanToken();for(;null!=r;)s.push(r),r=t.scanToken();return s}},Q=class{constructor(e,t,s,r,n){this.index=e,this.end=t,this.type=s,this.numValue=r,this.strValue=n}isCharacter(e){return this.type==u.Character&&this.numValue==e}isNumber(){return this.type==u.Number}isString(){return this.type==u.String}isOperator(e){return this.type==u.Operator&&this.strValue==e}isIdentifier(){return this.type==u.Identifier}isPrivateIdentifier(){return this.type==u.PrivateIdentifier}isKeyword(){return this.type==u.Keyword}isKeywordLet(){return this.type==u.Keyword&&"let"==this.strValue}isKeywordAs(){return this.type==u.Keyword&&"as"==this.strValue}isKeywordNull(){return this.type==u.Keyword&&"null"==this.strValue}isKeywordUndefined(){return this.type==u.Keyword&&"undefined"==this.strValue}isKeywordTrue(){return this.type==u.Keyword&&"true"==this.strValue}isKeywordFalse(){return this.type==u.Keyword&&"false"==this.strValue}isKeywordThis(){return this.type==u.Keyword&&"this"==this.strValue}isError(){return this.type==u.Error}toNumber(){return this.type==u.Number?this.numValue:-1}toString(){switch(this.type){case u.Character:case u.Identifier:case u.Keyword:case u.Operator:case u.PrivateIdentifier:case u.String:case u.Error:return this.strValue;case u.Number:return this.numValue.toString();default:return null}}};function H(e,t,s){return new Q(e,t,u.Character,s,String.fromCharCode(s))}function X(e,t,s){return new Q(e,t,u.Operator,0,s)}var Y=new Q(-1,-1,u.Character,0,""),Z=class{constructor(e){this.input=e,this.peek=0,this.index=-1,this.length=e.length,this.advance()}advance(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)}scanToken(){let e=this.input,t=this.length,s=this.peek,r=this.index;for(;s<=32;){if(++r>=t){s=0;break}s=e.charCodeAt(r)}if(this.peek=s,this.index=r,r>=t)return null;if(ee(s))return this.scanIdentifier();if(q(s))return this.scanNumber(r);let n=r;switch(s){case 46:return this.advance(),q(this.peek)?this.scanNumber(n):H(n,this.index,46);case 40:case 41:case 123:case 125:case 91:case 93:case 44:case 58:case 59:return this.scanCharacter(n,s);case 39:case 34:return this.scanString();case 35:return this.scanPrivateIdentifier();case 43:case 45:case 42:case 47:case 37:case 94:return this.scanOperator(n,String.fromCharCode(s));case 63:return this.scanQuestion(n);case 60:case 62:return this.scanComplexOperator(n,String.fromCharCode(s),61,"=");case 33:case 61:return this.scanComplexOperator(n,String.fromCharCode(s),61,"=",61,"=");case 38:return this.scanComplexOperator(n,"&",38,"&");case 124:return this.scanComplexOperator(n,"|",124,"|");case 160:for(;j(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error(`Unexpected character [${String.fromCharCode(s)}]`,0)}scanCharacter(e,t){return this.advance(),H(e,this.index,t)}scanOperator(e,t){return this.advance(),X(e,this.index,t)}scanComplexOperator(e,t,s,r,n,i){this.advance();let a=t;return this.peek==s&&(this.advance(),a+=r),null!=n&&this.peek==n&&(this.advance(),a+=i),X(e,this.index,a)}scanIdentifier(){let e=this.index;for(this.advance();te(this.peek);)this.advance();let t=this.input.substring(e,this.index);return D.indexOf(t)>-1?function(e,t,s){return new Q(e,t,u.Keyword,0,s)}(e,this.index,t):function(e,t,s){return new Q(e,t,u.Identifier,0,s)}(e,this.index,t)}scanPrivateIdentifier(){let e=this.index;if(this.advance(),!ee(this.peek))return this.error("Invalid character [#]",-1);for(;te(this.peek);)this.advance();let t=this.input.substring(e,this.index);return function(e,t,s){return new Q(e,t,u.PrivateIdentifier,0,s)}(e,this.index,t)}scanNumber(e){let t=this.index===e,s=!1;for(this.advance();;){if(!q(this.peek))if(95===this.peek){if(!q(this.input.charCodeAt(this.index-1))||!q(this.input.charCodeAt(this.index+1)))return this.error("Invalid numeric separator",0);s=!0}else if(46===this.peek)t=!1;else{if(!se(this.peek))break;if(this.advance(),re(this.peek)&&this.advance(),!q(this.peek))return this.error("Invalid exponent",-1);t=!1}this.advance()}let r=this.input.substring(e,this.index);s&&(r=r.replace(/_/g,""));let n=t?function(e){let t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}(r):parseFloat(r);return function(e,t,s){return new Q(e,t,u.Number,s,"")}(e,this.index,n)}scanString(){let e=this.index,t=this.peek;this.advance();let s="",r=this.index,n=this.input;for(;this.peek!=t;)if(92==this.peek){let e;if(s+=n.substring(r,this.index),this.advance(),117==this.peek){let t=n.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(t))return this.error(`Invalid unicode escape [\\u${t}]`,0);e=parseInt(t,16);for(let e=0;e<5;e++)this.advance()}else e=ne(this.peek),this.advance();s+=String.fromCharCode(e),r=this.index}else{if(0==this.peek)return this.error("Unterminated quote",0);this.advance()}let i=n.substring(r,this.index);return this.advance(),function(e,t,s){return new Q(e,t,u.String,0,s)}(e,this.index,s+i)}scanQuestion(e){this.advance();let t="?";return(63===this.peek||46===this.peek)&&(t+=46===this.peek?".":"?",this.advance()),X(e,this.index,t)}error(e,t){let s=this.index+t;return function(e,t,s){return new Q(e,t,u.Error,0,s)}(s,this.index,`Lexer Error: ${e} at column ${s} in expression [${this.input}]`)}};function ee(e){return 97<=e&&e<=122||65<=e&&e<=90||95==e||36==e}function te(e){return function(e){return e>=97&&e<=122||e>=65&&e<=90}(e)||q(e)||95==e||36==e}function se(e){return 101==e||69==e}function re(e){return 45==e||43==e}function ne(e){switch(e){case 110:return 10;case 102:return 12;case 114:return 13;case 116:return 9;case 118:return 11;default:return e}}var ie,ae=new class e{static fromArray(t){return t?(function(e,t){if(null!=t&&(!Array.isArray(t)||2!=t.length))throw new Error("Expected 'interpolation' to be an array, [start, end].");if(null!=t){let e=t[0],s=t[1];null.forEach((t=>{if(t.test(e)||t.test(s))throw new Error(`['${e}', '${s}'] contains unusable interpolation symbol.`)}))}}(0,t),new e(t[0],t[1])):ae}constructor(e,t){this.start=e,this.end=t}}("{{","}}"),oe=class{constructor(e,t,s){this.strings=e,this.expressions=t,this.offsets=s}},he=class{constructor(e,t,s){this.templateBindings=e,this.warnings=t,this.errors=s}},ue=class{constructor(e){this._lexer=e,this.errors=[]}parseAction(e,t,s,r,n=ae){this._checkNoInterpolation(e,s,n);let i=this._stripComments(e),a=this._lexer.tokenize(i),o=1;t&&(o|=2);let h=new le(e,s,r,a,o,this.errors,0).parseChain();return new F(h,e,s,r,this.errors)}parseBinding(e,t,s,r=ae){let n=this._parseBindingAst(e,t,s,r);return new F(n,e,t,s,this.errors)}checkSimpleExpression(e){let t=new ce;return e.visit(t),t.errors}parseSimpleBinding(e,t,s,r=ae){let n=this._parseBindingAst(e,t,s,r),i=this.checkSimpleExpression(n);return i.length>0&&this._reportError(`Host binding expression cannot contain ${i.join(" ")}`,e,t),new F(n,e,t,s,this.errors)}_reportError(e,t,s,r){this.errors.push(new d(e,t,s,r))}_parseBindingAst(e,t,s,r){this._checkNoInterpolation(e,t,r);let n=this._stripComments(e),i=this._lexer.tokenize(n);return new le(e,t,s,i,0,this.errors,0).parseChain()}parseTemplateBindings(e,t,s,r,n){let i=this._lexer.tokenize(t);return new le(t,s,n,i,0,this.errors,0).parseTemplateBindings({source:e,span:new U(r,r+e.length)})}parseInterpolation(e,t,s,r,n=ae){let{strings:i,expressions:a,offsets:o}=this.splitInterpolation(e,t,r,n);if(0===a.length)return null;let h=[];for(let r=0;r<a.length;++r){let n=a[r].text,i=this._stripComments(n),u=this._lexer.tokenize(i),l=new le(e,t,s,u,0,this.errors,o[r]).parseChain();h.push(l)}return this.createInterpolationAst(i.map((e=>e.text)),h,e,t,s)}parseInterpolationExpression(e,t,s){let r=this._stripComments(e),n=this._lexer.tokenize(r),i=new le(e,t,s,n,0,this.errors,0).parseChain();return this.createInterpolationAst(["",""],[i],e,t,s)}createInterpolationAst(e,t,s,r,n){let i=new f(0,s.length),a=new L(i,i.toAbsolute(n),e,t);return new F(a,s,r,n,this.errors)}splitInterpolation(e,t,s,r=ae){let n=[],i=[],a=[],o=s?function(e){let t=new Map,s=0,r=0,n=0;for(;n<e.length;){let i=e[n];if(9===i.type){let[e,t]=i.parts;s+=t.length,r+=e.length}else{let e=i.parts.reduce(((e,t)=>e+t.length),0);r+=e,s+=e}t.set(r,s),n++}return t}(s):null,h=0,u=!1,l=!1,{start:c,end:p}=r;for(;h<e.length;)if(u){let s=h,r=s+c.length,n=this._getInterpolationEndIndex(e,p,r);if(-1===n){u=!1,l=!0;break}let d=n+p.length,f=e.substring(r,n);0===f.trim().length&&this._reportError("Blank expressions are not allowed in interpolated strings",e,`at column ${h} in`,t),i.push({text:f,start:s,end:d});let x=((null==o?void 0:o.get(s))??s)+c.length;a.push(x),h=d,u=!1}else{let t=h;h=e.indexOf(c,h),-1===h&&(h=e.length);let s=e.substring(t,h);n.push({text:s,start:t,end:h}),u=!0}if(!u)if(l){let t=n[n.length-1];t.text+=e.substring(h),t.end=e.length}else n.push({text:e.substring(h),start:h,end:e.length});return new oe(n,i,a)}wrapLiteralPrimitive(e,t,s){let r=new f(0,null==e?0:e.length);return new F(new A(r,r.toAbsolute(s),e),e,t,s,this.errors)}_stripComments(e){let t=this._commentStart(e);return null!=t?e.substring(0,t):e}_commentStart(e){let t=null;for(let s=0;s<e.length-1;s++){let r=e.charCodeAt(s),n=e.charCodeAt(s+1);if(47===r&&47==n&&null==t)return s;t===r?t=null:null==t&&z(r)&&(t=r)}return null}_checkNoInterpolation(e,t,{start:s,end:r}){let n=-1,i=-1;for(let t of this._forEachUnquotedChar(e,0))if(-1===n)e.startsWith(s)&&(n=t);else if(i=this._getInterpolationEndIndex(e,r,t),i>-1)break;n>-1&&i>-1&&this._reportError(`Got interpolation (${s}${r}) where expression was expected`,e,`at column ${n} in`,t)}_getInterpolationEndIndex(e,t,s){for(let r of this._forEachUnquotedChar(e,s)){if(e.startsWith(t,r))return r;if(e.startsWith("//",r))return e.indexOf(t,r)}return-1}*_forEachUnquotedChar(e,t){let s=null,r=0;for(let n=t;n<e.length;n++){let t=e[n];!z(e.charCodeAt(n))||null!==s&&s!==t||r%2!=0?null===s&&(yield n):s=null===s?t:null,r="\\"===t?r+1:0}}};!function(e){e[e.None=0]="None",e[e.Writable=1]="Writable"}(ie||(ie={}));var le=class{constructor(e,t,s,r,n,i,a){this.input=e,this.location=t,this.absoluteOffset=s,this.tokens=r,this.parseFlags=n,this.errors=i,this.offset=a,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.context=ie.None,this.sourceSpanCache=new Map,this.index=0}peek(e){let t=this.index+e;return t<this.tokens.length?this.tokens[t]:Y}get next(){return this.peek(0)}get atEOF(){return this.index>=this.tokens.length}get inputIndex(){return this.atEOF?this.currentEndIndex:this.next.index+this.offset}get currentEndIndex(){return this.index>0?this.peek(-1).end+this.offset:0===this.tokens.length?this.input.length+this.offset:this.next.index+this.offset}get currentAbsoluteOffset(){return this.absoluteOffset+this.inputIndex}span(e,t){let s=this.currentEndIndex;if(void 0!==t&&t>this.currentEndIndex&&(s=t),e>s){let t=s;s=e,e=t}return new f(e,s)}sourceSpan(e,t){let s=`${e}@${this.inputIndex}:${t}`;return this.sourceSpanCache.has(s)||this.sourceSpanCache.set(s,this.span(e,t).toAbsolute(this.absoluteOffset)),this.sourceSpanCache.get(s)}advance(){this.index++}withContext(e,t){this.context|=e;let s=t();return this.context^=e,s}consumeOptionalCharacter(e){return!!this.next.isCharacter(e)&&(this.advance(),!0)}peekKeywordLet(){return this.next.isKeywordLet()}peekKeywordAs(){return this.next.isKeywordAs()}expectCharacter(e){this.consumeOptionalCharacter(e)||this.error(`Missing expected ${String.fromCharCode(e)}`)}consumeOptionalOperator(e){return!!this.next.isOperator(e)&&(this.advance(),!0)}expectOperator(e){this.consumeOptionalOperator(e)||this.error(`Missing expected operator ${e}`)}prettyPrintToken(e){return e===Y?"end of input":`token ${e}`}expectIdentifierOrKeyword(){let e=this.next;return e.isIdentifier()||e.isKeyword()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier or keyword"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier or keyword`),null)}expectIdentifierOrKeywordOrString(){let e=this.next;return e.isIdentifier()||e.isKeyword()||e.isString()?(this.advance(),e.toString()):(e.isPrivateIdentifier()?this._reportErrorForPrivateIdentifier(e,"expected identifier, keyword or string"):this.error(`Unexpected ${this.prettyPrintToken(e)}, expected identifier, keyword, or string`),"")}parseChain(){let e=[],t=this.inputIndex;for(;this.index<this.tokens.length;){let t=this.parsePipe();if(e.push(t),this.consumeOptionalCharacter(59))for(1&this.parseFlags||this.error("Binding expression cannot contain chained expression");this.consumeOptionalCharacter(59););else if(this.index<this.tokens.length){let e=this.index;if(this.error(`Unexpected token '${this.next}'`),this.index===e)break}}if(0===e.length){let e=this.offset,t=this.offset+this.input.length;return new g(this.span(e,t),this.sourceSpan(e,t))}return 1==e.length?e[0]:new w(this.span(t),this.sourceSpan(t),e)}parsePipe(){let e=this.inputIndex,t=this.parseExpression();if(this.consumeOptionalOperator("|")){1&this.parseFlags&&this.error("Cannot have a pipe in an action expression");do{let s,r,n=this.inputIndex,i=this.expectIdentifierOrKeyword();null!==i?s=this.sourceSpan(n):(i="",r=-1!==this.next.index?this.next.index:this.input.length+this.offset,s=new f(r,r).toAbsolute(this.absoluteOffset));let a=[];for(;this.consumeOptionalCharacter(58);)a.push(this.parseExpression());t=new b(this.span(e),this.sourceSpan(e,r),t,i,a,s)}while(this.consumeOptionalOperator("|"))}return t}parseExpression(){return this.parseConditional()}parseConditional(){let e=this.inputIndex,t=this.parseLogicalOr();if(this.consumeOptionalOperator("?")){let s,r=this.parsePipe();if(this.consumeOptionalCharacter(58))s=this.parsePipe();else{let t=this.inputIndex,r=this.input.substring(e,t);this.error(`Conditional expression ${r} requires all 3 expressions`),s=new g(this.span(e),this.sourceSpan(e))}return new S(this.span(e),this.sourceSpan(e),t,r,s)}return t}parseLogicalOr(){let e=this.inputIndex,t=this.parseLogicalAnd();for(;this.consumeOptionalOperator("||");){let s=this.parseLogicalAnd();t=new _(this.span(e),this.sourceSpan(e),"||",t,s)}return t}parseLogicalAnd(){let e=this.inputIndex,t=this.parseNullishCoalescing();for(;this.consumeOptionalOperator("&&");){let s=this.parseNullishCoalescing();t=new _(this.span(e),this.sourceSpan(e),"&&",t,s)}return t}parseNullishCoalescing(){let e=this.inputIndex,t=this.parseEquality();for(;this.consumeOptionalOperator("??");){let s=this.parseEquality();t=new _(this.span(e),this.sourceSpan(e),"??",t,s)}return t}parseEquality(){let e=this.inputIndex,t=this.parseRelational();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"==":case"===":case"!=":case"!==":this.advance();let r=this.parseRelational();t=new _(this.span(e),this.sourceSpan(e),s,t,r);continue}break}return t}parseRelational(){let e=this.inputIndex,t=this.parseAdditive();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"<":case">":case"<=":case">=":this.advance();let r=this.parseAdditive();t=new _(this.span(e),this.sourceSpan(e),s,t,r);continue}break}return t}parseAdditive(){let e=this.inputIndex,t=this.parseMultiplicative();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"+":case"-":this.advance();let r=this.parseMultiplicative();t=new _(this.span(e),this.sourceSpan(e),s,t,r);continue}break}return t}parseMultiplicative(){let e=this.inputIndex,t=this.parsePrefix();for(;this.next.type==u.Operator;){let s=this.next.strValue;switch(s){case"*":case"%":case"/":this.advance();let r=this.parsePrefix();t=new _(this.span(e),this.sourceSpan(e),s,t,r);continue}break}return t}parsePrefix(){if(this.next.type==u.Operator){let e,t=this.inputIndex;switch(this.next.strValue){case"+":return this.advance(),e=this.parsePrefix(),T.createPlus(this.span(t),this.sourceSpan(t),e);case"-":return this.advance(),e=this.parsePrefix(),T.createMinus(this.span(t),this.sourceSpan(t),e);case"!":return this.advance(),e=this.parsePrefix(),new $(this.span(t),this.sourceSpan(t),e)}}return this.parseCallChain()}parseCallChain(){let e=this.inputIndex,t=this.parsePrimary();for(;;)if(this.consumeOptionalCharacter(46))t=this.parseAccessMember(t,e,!1);else if(this.consumeOptionalOperator("?."))t=this.consumeOptionalCharacter(40)?this.parseCall(t,e,!0):this.consumeOptionalCharacter(91)?this.parseKeyedReadOrWrite(t,e,!0):this.parseAccessMember(t,e,!0);else if(this.consumeOptionalCharacter(91))t=this.parseKeyedReadOrWrite(t,e,!1);else if(this.consumeOptionalCharacter(40))t=this.parseCall(t,e,!1);else{if(!this.consumeOptionalOperator("!"))return t;t=new M(this.span(e),this.sourceSpan(e),t)}}parsePrimary(){let e=this.inputIndex;if(this.consumeOptionalCharacter(40)){this.rparensExpected++;let e=this.parsePipe();return this.rparensExpected--,this.expectCharacter(41),e}if(this.next.isKeywordNull())return this.advance(),new A(this.span(e),this.sourceSpan(e),null);if(this.next.isKeywordUndefined())return this.advance(),new A(this.span(e),this.sourceSpan(e),void 0);if(this.next.isKeywordTrue())return this.advance(),new A(this.span(e),this.sourceSpan(e),!0);if(this.next.isKeywordFalse())return this.advance(),new A(this.span(e),this.sourceSpan(e),!1);if(this.next.isKeywordThis())return this.advance(),new y(this.span(e),this.sourceSpan(e));if(this.consumeOptionalCharacter(91)){this.rbracketsExpected++;let t=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new K(this.span(e),this.sourceSpan(e),t)}if(this.next.isCharacter(123))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMember(new m(this.span(e),this.sourceSpan(e)),e,!1);if(this.next.isNumber()){let t=this.next.toNumber();return this.advance(),new A(this.span(e),this.sourceSpan(e),t)}if(this.next.isString()){let t=this.next.toString();return this.advance(),new A(this.span(e),this.sourceSpan(e),t)}return this.next.isPrivateIdentifier()?(this._reportErrorForPrivateIdentifier(this.next,null),new g(this.span(e),this.sourceSpan(e))):this.index>=this.tokens.length?(this.error(`Unexpected end of expression: ${this.input}`),new g(this.span(e),this.sourceSpan(e))):(this.error(`Unexpected token ${this.next}`),new g(this.span(e),this.sourceSpan(e)))}parseExpressionList(e){let t=[];do{if(this.next.isCharacter(e))break;t.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return t}parseLiteralMap(){let e=[],t=[],s=this.inputIndex;if(this.expectCharacter(123),!this.consumeOptionalCharacter(125)){this.rbracesExpected++;do{let s=this.inputIndex,r=this.next.isString(),n=this.expectIdentifierOrKeywordOrString();if(e.push({key:n,quoted:r}),r)this.expectCharacter(58),t.push(this.parsePipe());else if(this.consumeOptionalCharacter(58))t.push(this.parsePipe());else{let e=this.span(s),r=this.sourceSpan(s);t.push(new C(e,r,r,new m(e,r),n))}}while(this.consumeOptionalCharacter(44)&&!this.next.isCharacter(125));this.rbracesExpected--,this.expectCharacter(125)}return new N(this.span(s),this.sourceSpan(s),e,t)}parseAccessMember(e,t,s){let r,n=this.inputIndex,i=this.withContext(ie.Writable,(()=>{let t=this.expectIdentifierOrKeyword()??"";return 0===t.length&&this.error("Expected identifier for property access",e.span.end),t})),a=this.sourceSpan(n);if(s)this.consumeOptionalAssignment()?(this.error("The '?.' operator cannot be used in the assignment"),r=new g(this.span(t),this.sourceSpan(t))):r=new O(this.span(t),this.sourceSpan(t),a,e,i);else if(this.consumeOptionalAssignment()){if(!(1&this.parseFlags))return this.error("Bindings cannot contain assignments"),new g(this.span(t),this.sourceSpan(t));let s=this.parseConditional();r=new P(this.span(t),this.sourceSpan(t),a,e,i,s)}else r=new C(this.span(t),this.sourceSpan(t),a,e,i);return r}parseCall(e,t,s){let r=this.inputIndex;this.rparensExpected++;let n=this.parseCallArguments(),i=this.span(r,this.inputIndex).toAbsolute(this.absoluteOffset);this.expectCharacter(41),this.rparensExpected--;let a=this.span(t),o=this.sourceSpan(t);return s?new R(a,o,e,n,i):new B(a,o,e,n,i)}consumeOptionalAssignment(){return 2&this.parseFlags&&this.next.isOperator("!")&&this.peek(1).isOperator("=")?(this.advance(),this.advance(),!0):this.consumeOptionalOperator("=")}parseCallArguments(){if(this.next.isCharacter(41))return[];let e=[];do{e.push(this.parsePipe())}while(this.consumeOptionalCharacter(44));return e}expectTemplateBindingKey(){let e="",t=!1,s=this.currentAbsoluteOffset;do{e+=this.expectIdentifierOrKeywordOrString(),t=this.consumeOptionalOperator("-"),t&&(e+="-")}while(t);return{source:e,span:new U(s,s+e.length)}}parseTemplateBindings(e){let t=[];for(t.push(...this.parseDirectiveKeywordBindings(e));this.index<this.tokens.length;){let s=this.parseLetBinding();if(s)t.push(s);else{let s=this.expectTemplateBindingKey(),r=this.parseAsBinding(s);r?t.push(r):(s.source=e.source+s.source.charAt(0).toUpperCase()+s.source.substring(1),t.push(...this.parseDirectiveKeywordBindings(s)))}this.consumeStatementTerminator()}return new he(t,[],this.errors)}parseKeyedReadOrWrite(e,t,s){return this.withContext(ie.Writable,(()=>{this.rbracketsExpected++;let r=this.parsePipe();if(r instanceof g&&this.error("Key access cannot be empty"),this.rbracketsExpected--,this.expectCharacter(93),!this.consumeOptionalOperator("="))return s?new E(this.span(t),this.sourceSpan(t),e,r):new k(this.span(t),this.sourceSpan(t),e,r);if(!s){let s=this.parseConditional();return new I(this.span(t),this.sourceSpan(t),e,r,s)}return this.error("The '?.' operator cannot be used in the assignment"),new g(this.span(t),this.sourceSpan(t))}))}parseDirectiveKeywordBindings(e){let t=[];this.consumeOptionalCharacter(58);let s=this.getDirectiveBoundTarget(),r=this.currentAbsoluteOffset,n=this.parseAsBinding(e);n||(this.consumeStatementTerminator(),r=this.currentAbsoluteOffset);let i=new U(e.span.start,r);return t.push(new V(i,e,s)),n&&t.push(n),t}getDirectiveBoundTarget(){if(this.next===Y||this.peekKeywordAs()||this.peekKeywordLet())return null;let e=this.parsePipe(),{start:t,end:s}=e.span,r=this.input.substring(t,s);return new F(e,r,this.location,this.absoluteOffset+t,this.errors)}parseAsBinding(e){if(!this.peekKeywordAs())return null;this.advance();let t=this.expectTemplateBindingKey();this.consumeStatementTerminator();let s=new U(e.span.start,this.currentAbsoluteOffset);return new G(s,t,e)}parseLetBinding(){if(!this.peekKeywordLet())return null;let e=this.currentAbsoluteOffset;this.advance();let t=this.expectTemplateBindingKey(),s=null;this.consumeOptionalOperator("=")&&(s=this.expectTemplateBindingKey()),this.consumeStatementTerminator();let r=new U(e,this.currentAbsoluteOffset);return new G(r,t,s)}consumeStatementTerminator(){this.consumeOptionalCharacter(59)||this.consumeOptionalCharacter(44)}error(e,t=null){this.errors.push(new d(e,this.input,this.locationText(t),this.location)),this.skip()}locationText(e=null){return null==e&&(e=this.index),e<this.tokens.length?`at column ${this.tokens[e].index+1} in`:"at the end of the expression"}_reportErrorForPrivateIdentifier(e,t){let s=`Private identifiers are not supported. Unexpected private identifier: ${e}`;null!==t&&(s+=`, ${t}`),this.error(s)}skip(){let e=this.next;for(;this.index<this.tokens.length&&!e.isCharacter(59)&&!e.isOperator("|")&&(this.rparensExpected<=0||!e.isCharacter(41))&&(this.rbracesExpected<=0||!e.isCharacter(125))&&(this.rbracketsExpected<=0||!e.isCharacter(93))&&!(this.context&ie.Writable&&e.isOperator("="));)this.next.isError()&&this.errors.push(new d(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),e=this.next}},ce=class extends W{constructor(){super(...arguments),this.errors=[]}visitPipe(){this.errors.push("pipes")}},pe="angular-estree-parser",de="NgEstreeParser",fe=[pe,0];function xe(){return new ue(new J)}function ve(e,t){let s=xe(),{astInput:r,comments:n}=function(e,t){let s=t._commentStart(e);return null===s?{astInput:e,comments:[]}:{astInput:e.slice(0,s),comments:[{type:"Comment",value:e.slice(s+2),sourceSpan:{start:s,end:e.length}}]}}(e,s),{ast:i,errors:a}=t(r,s);return we(a),{ast:i,comments:n}}function ge(e){return ve(e,((e,t)=>t.parseBinding(e,...fe)))}function me(e){return ve(e,((e,t)=>t.parseAction(e,!1,...fe)))}function ye(e){return ve(e,((e,t)=>{let s=t.parseInterpolationExpression(e,...fe);return s.ast=s.ast.expressions[0],s}))}function we(e){if(0!==e.length){let[{message:t}]=e;throw new SyntaxError(t.replace(/^Parser Error: | at column \d+ in [^]*$/g,""))}}function Se({start:e,end:t},s){let r=e,n=t;for(;n!==r&&/\s/.test(s[n-1]);)n--;for(;r!==n&&/\s/.test(s[r]);)r++;return{start:r,end:n}}function Ce({start:e,end:t},s){let r=e,n=t;for(;n!==s.length&&/\s/.test(s[n]);)n++;for(;0!==r&&/\s/.test(s[r-1]);)r--;return{start:r,end:n}}function Pe(e,t){return"("===t[e.start-1]&&")"===t[e.end]?{start:e.start-1,end:e.end+1}:e}function Oe(e,t,s){let r=t;for(;!e.test(s[r]);)if(++r>=s.length)throw new Error(`Cannot find back char ${e} from index ${t} in ${JSON.stringify(s)}`);return r}function ke(e){return 0===e.length?void 0:e[e.length-1]}var Ee=(e,t,s=!1)=>{let r=function(e){return e instanceof T?"Unary":e instanceof _?"Binary":e instanceof b?"BindingPipe":e instanceof B?"Call":e instanceof w?"Chain":e instanceof S?"Conditional":e instanceof g?"EmptyExpr":e instanceof m?"ImplicitReceiver":e instanceof k?"KeyedRead":e instanceof E?"SafeKeyedRead":e instanceof I?"KeyedWrite":e instanceof K?"LiteralArray":e instanceof N?"LiteralMap":e instanceof A?"LiteralPrimitive":e instanceof M?"NonNullAssert":e instanceof $?"PrefixNot":e instanceof C?"PropertyRead":e instanceof P?"PropertyWrite":e instanceof R?"SafeCall":e instanceof O?"SafePropertyRead":e.type}(e);switch(r){case"Unary":{let{operator:t,expr:r}=e;return i("UnaryExpression",{prefix:!0,argument:n(r),operator:t},e.sourceSpan,{hasParentParens:s})}case"Binary":{let{left:t,operation:r,right:a}=e,o=n(t),h=n(a);return i("&&"===r||"||"===r||"??"===r?"LogicalExpression":"BinaryExpression",{left:o,right:h,operator:r},{start:p(o),end:d(h)},{hasParentParens:s})}case"BindingPipe":{let{exp:t,name:r,args:a}=e,o=n(t),u=h(/\S/,h(/\|/,d(o))+1),l=i("Identifier",{name:r},{start:u,end:u+r.length}),c=a.map(n);return i("NGPipeExpression",{left:o,right:l,arguments:c},{start:p(o),end:d(0===c.length?l:ke(c))},{hasParentParens:s})}case"Chain":{let{expressions:t}=e;return i("NGChainedExpression",{expressions:t.map(n)},e.sourceSpan,{hasParentParens:s})}case"Comment":{let{value:t}=e;return i("CommentLine",{value:t},e.sourceSpan,{processSpan:!1})}case"Conditional":{let{condition:t,trueExp:r,falseExp:a}=e,o=n(t),h=n(r),u=n(a);return i("ConditionalExpression",{test:o,consequent:h,alternate:u},{start:p(o),end:d(u)},{hasParentParens:s})}case"EmptyExpr":return i("NGEmptyExpression",{},e.sourceSpan,{hasParentParens:s});case"ImplicitReceiver":return i("ThisExpression",{},e.sourceSpan,{hasParentParens:s});case"KeyedRead":case"SafeKeyedRead":{let t="SafeKeyedRead"===r,{key:i}=e;return a(Object.prototype.hasOwnProperty.call(e,"receiver")?e.receiver:e.obj,n(i),{computed:!0,optional:t},{end:e.sourceSpan.end,hasParentParens:s})}case"LiteralArray":{let{expressions:t}=e;return i("ArrayExpression",{elements:t.map(n)},e.sourceSpan,{hasParentParens:s})}case"LiteralMap":{let{keys:t,values:r}=e,a=r.map((e=>n(e))),u=t.map((({key:t,quoted:s},r)=>{let n=a[r],u=p(n),l=d(n),c=h(/\S/,0===r?e.sourceSpan.start+1:h(/,/,d(a[r-1]))+1),f={start:c,end:u===c?l:o(/\S/,o(/:/,u-1)-1)+1},x=s?i("StringLiteral",{value:t},f):i("Identifier",{name:t},f);return i("ObjectProperty",{key:x,value:n,shorthand:x.end<x.start||c===u,computed:!1},{start:p(x),end:l})}));return i("ObjectExpression",{properties:u},e.sourceSpan,{hasParentParens:s})}case"LiteralPrimitive":{let{value:t}=e;switch(typeof t){case"boolean":return i("BooleanLiteral",{value:t},e.sourceSpan,{hasParentParens:s});case"number":return i("NumericLiteral",{value:t},e.sourceSpan,{hasParentParens:s});case"object":return i("NullLiteral",{},e.sourceSpan,{hasParentParens:s});case"string":return i("StringLiteral",{value:t},e.sourceSpan,{hasParentParens:s});case"undefined":return i("Identifier",{name:"undefined"},e.sourceSpan,{hasParentParens:s});default:throw new Error("Unexpected LiteralPrimitive value type "+typeof t)}}case"Call":case"SafeCall":{let a="SafeCall"===r,{receiver:o,args:h}=e,u=1===h.length?[function(e){return Ee(e,t,!0)}(h[0])]:h.map(n),c=n(o),d=l(c),f=a||d?"OptionalCallExpression":"CallExpression";return i(f,{callee:c,arguments:u,optional:"OptionalCallExpression"===f?a:void 0},{start:p(c),end:e.sourceSpan.end},{hasParentParens:s})}case"NonNullAssert":{let{expression:t}=e,r=n(t);return i("TSNonNullExpression",{expression:r},{start:p(r),end:e.sourceSpan.end},{hasParentParens:s})}case"PrefixNot":{let{expression:t}=e,r=n(t);return i("UnaryExpression",{prefix:!0,operator:"!",argument:r},{start:e.sourceSpan.start,end:d(r)},{hasParentParens:s})}case"PropertyRead":case"SafePropertyRead":{let t="SafePropertyRead"===r,{receiver:n,name:h}=e,l=o(/\S/,e.sourceSpan.end-1)+1;return a(n,i("Identifier",{name:h},{start:l-h.length,end:l},u(n)?{hasParentParens:s}:{}),{computed:!1,optional:t},{hasParentParens:s})}case"KeyedWrite":{let{key:t,value:r}=e,o=Object.prototype.hasOwnProperty.call(e,"receiver")?e.receiver:e.obj,u=n(t),l=n(r),c=a(o,u,{computed:!0,optional:!1},{end:h(/\]/,d(u))+1});return i("AssignmentExpression",{left:c,operator:"=",right:l},{start:p(c),end:d(l)},{hasParentParens:s})}case"PropertyWrite":{let{receiver:t,name:r,value:h}=e,u=n(h),l=o(/\S/,o(/=/,p(u)-1)-1)+1,c=a(t,i("Identifier",{name:r},{start:l-r.length,end:l}),{computed:!1,optional:!1});return i("AssignmentExpression",{left:c,operator:"=",right:u},{start:p(c),end:d(u)},{hasParentParens:s})}default:throw new Error(`Unexpected node ${r}`)}function n(e){return Ee(e,t)}function i(e,s,r,{processSpan:n=!0,hasParentParens:i=!1}={}){let a={type:e,...Ie(r,t,n,i),...s};switch(e){case"NumericLiteral":{let e=a;e.extra={...e.extra,raw:t.text.slice(e.start,e.end),rawValue:e.value};break}case"StringLiteral":{let e=a;e.extra={...e.extra,raw:t.text.slice(e.start,e.end),rawValue:e.value};break}case"ObjectProperty":{let e=a;e.shorthand&&(e.extra={...e.extra,shorthand:e.shorthand});break}}return a}function a(e,t,s,{end:r=d(t),hasParentParens:a=!1}={}){if(u(e)||e.sourceSpan.start===t.start)return t;let o=n(e),h=l(o);return i(s.optional||h?"OptionalMemberExpression":"MemberExpression",{object:o,property:t,computed:s.computed,...s.optional?{optional:!0}:h?{optional:!1}:null},{start:p(o),end:r},{hasParentParens:a})}function o(e,s){return function(e,t,s){let r=t;for(;!e.test(s[r]);)if(--r<0)throw new Error(`Cannot find front char ${e} from index ${t} in ${JSON.stringify(s)}`);return r}(e,s,t.text)}function h(e,s){return Oe(e,s,t.text)}function u(e){return e.sourceSpan.start>=e.sourceSpan.end||/^\s+$/.test(t.text.slice(e.sourceSpan.start,e.sourceSpan.end))}function l(e){return("OptionalCallExpression"===e.type||"OptionalMemberExpression"===e.type)&&!c(e)}function c(e){return e.extra&&e.extra.parenthesized}function p(e){return c(e)?e.extra.parenStart:e.start}function d(e){return c(e)?e.extra.parenEnd:e.end}};function Ie(e,t,s=!1,r=!1){if(!s){let{start:s,end:r}=e;return{start:s,end:r,loc:{start:t.locator.locationForIndex(s),end:t.locator.locationForIndex(r)}}}let{outerSpan:n,innerSpan:i,hasParens:a}=function(e,t,s){let r=0,n={start:e.start,end:e.end};for(;;){let e=Ce(n,t),s=Pe(e,t);if(e.start===s.start&&e.end===s.end)break;n.start=s.start,n.end=s.end,r++}return{hasParens:0!==(s?r-1:r),outerSpan:Se(s?{start:n.start+1,end:n.end-1}:n,t),innerSpan:Se(e,t)}}(e,t.text,r);return{start:i.start,end:i.end,loc:{start:t.locator.locationForIndex(i.start),end:t.locator.locationForIndex(i.end)},...a&&{extra:{parenthesized:!0,parenStart:n.start,parenEnd:n.end}}}}function be(e,t){let{ast:s,comments:r}=t(e),n=new c(e),i=e=>Ee(e,n),a=i(s);return a.comments=r.map((e=>i(e))),a}function Ae(e){return be(e,me)}var Ke=function(e){return Array.isArray(e)&&e.length>0};function Ne(e){var t;let s=e.range?e.range[0]:e.start,r=(null==(t=e.declaration)?void 0:t.decorators)??e.decorators;return Ke(r)?Math.min(Ne(r[0]),s):s}function Le(e){return e.range?e.range[1]:e.end}function _e(e){return{astFormat:"estree",parse(t){let s=e(t);return{type:"NGRoot",node:e===Ae&&"NGChainedExpression"!==s.type?{...s,type:"NGChainedExpression",expressions:[s]}:s}},locStart:Ne,locEnd:Le}}var Te=_e(Ae),$e=_e((function(e){return be(e,ge)})),Me=_e((function(e){return be(e,ye)})),Be=_e((function(e){return function(e,t){e.forEach((function(e){d(e.key.span),p(e)&&e.value&&d(e.value.span)}));let[s]=e,{key:r}=s,n=0===t.text.slice(s.sourceSpan.start,s.sourceSpan.end).trim().length?e.slice(1):e,i=[],a=null;for(let e=0;e<n.length;e++){let s=n[e];if(a&&c(a)&&p(s)&&s.value&&s.value.source===a.key.source){let e=u("NGMicrosyntaxKey",{name:s.key.source},s.key.span),r=(e,s)=>({...e,...Ie({start:e.start,end:s},t)}),n=t=>({...r(t,e.end),alias:e}),a=i.pop();if("NGMicrosyntaxExpression"===a.type)i.push(n(a));else{if("NGMicrosyntaxKeyedExpression"!==a.type)throw new Error(`Unexpected type ${a.type}`);{let e=n(a.expression);i.push(r({...a,expression:e},e.end))}}}else i.push(o(s,e));a=s}return u("NGMicrosyntax",{body:i},0===i.length?e[0].sourceSpan:{start:i[0].start,end:i[i.length-1].end});function o(e,s){if(c(e)){let{key:t,value:r}=e;return r?0===s?u("NGMicrosyntaxExpression",{expression:h(r.ast),alias:null},r.sourceSpan):u("NGMicrosyntaxKeyedExpression",{key:u("NGMicrosyntaxKey",{name:l(t.source)},t.span),expression:u("NGMicrosyntaxExpression",{expression:h(r.ast),alias:null},r.sourceSpan)},{start:t.span.start,end:r.sourceSpan.end}):u("NGMicrosyntaxKey",{name:l(t.source)},t.span)}{let{key:s,sourceSpan:r}=e;if(/^let\s$/.test(t.text.slice(r.start,r.start+4))){let{value:t}=e;return u("NGMicrosyntaxLet",{key:u("NGMicrosyntaxKey",{name:s.source},s.span),value:t?u("NGMicrosyntaxKey",{name:t.source},t.span):null},{start:r.start,end:t?t.span.end:s.span.end})}{let r=function(e){if(!e.value||e.value.source!==de)return e.value;let s=Oe(/\S/,e.sourceSpan.start,t.text);return{source:"$implicit",span:{start:s,end:s}}}(e);return u("NGMicrosyntaxAs",{key:u("NGMicrosyntaxKey",{name:r.source},r.span),alias:u("NGMicrosyntaxKey",{name:s.source},s.span)},{start:r.span.start,end:s.span.end})}}}function h(e){return Ee(e,t)}function u(e,s,r,n=!0){return{type:e,...Ie(r,t,n),...s}}function l(e){return function(e){return e.slice(0,1).toLowerCase()+e.slice(1)}(e.slice(r.source.length))}function c(e){return e instanceof V}function p(e){return e instanceof G}function d(e){if('"'!==t.text[e.start]&&"'"!==t.text[e.start])return;let s=t.text[e.start],r=!1;for(let n=e.start+1;n<t.text.length;n++)switch(t.text[n]){case s:if(!r)return void(e.end=n+1);default:r=!1;break;case"\\":r=!r}}}(function(e){let t=xe(),{templateBindings:s,errors:r}=t.parseTemplateBindings(de,e,pe,0,0);return we(r),s}(e),new c(e))})),Re=i}};